# 🍽️ Smart Food Recommender

AI 기반 개인 맞춤형 음식 추천 시스템

## 🎯 목표

- **이미지 기반 음식 인식**: OpenAI Vision API를 통한 실시간 음식 분석
- **자동 태그 생성**: 음식 종류, 맛(짠맛/단맛/매운맛), 칼로리, 영양소 자동 분류
- **개인화 추천**: 이전 식사 패턴을 분석하여 균형 잡힌 다음 메뉴 추천
- **주변 맛집 검색**: 추천받은 음식의 주변 음식점 자동 검색 및 안내
- **실시간 기록**: 아침/점심/저녁/간식을 즉시 촬영하여 식단 관리
- **GUI 기반**: 사용자 친화적인 인터페이스로 쉬운 음식 등록 및 추천 확인

## 🛠 사용 기술

| 기술 스택 | 용도 |
|-----------|------|
| **Python, PyQt5** | GUI 설계 및 프로그램 구현 |
| **OpenAI Vision API (GPT-4V)** | 이미지 기반 음식 인식 및 분석 |
| **OpenAI Tools/Functions** | 구조화된 태그 추출 및 메뉴 추천 |
| **네이버 지도 API** | 주변 맛집 검색 및 위치 정보 제공 |
| **SQLite3** | 식사 기록 및 개인 선호도 데이터 저장 |
| **python-dotenv** | API Key 등 환경변수 보안 관리 |
| **Pillow** | 이미지 처리 및 최적화 |
| **requests** | 외부 API 통신 |

## 🔁 전체 흐름

1. **음식 촬영** → 카메라로 음식 사진 촬영 또는 갤러리에서 선택
2. **AI 분석** → OpenAI Vision + Tools로 구조화된 음식 정보 추출
3. **데이터 저장** → 식사 시간, 음식 정보, 태그를 DB에 저장
4. **맞춤 추천** → 이전 식사 패턴 분석 후 균형 잡힌 다음 메뉴 추천
5. **맛집 검색** → 추천 메뉴의 주변 음식점 자동 검색 및 지도 표시

## 📊 시스템 구성도

### 메인 분석 플로우

[사용자] │ 음식 이미지 촬영/업로드\
▼ [OpenAI Vision API] → 음식 인식\
▼[OpenAI Tools] → 구조화된 태그 추출\
  ├─ 카테고리: [한식, 중식, 양식, 일식]\
  ├─ 세부메뉴: [김치찌개, 비빔밥, 파스타, 초밥]\
  └─ 특성: [짠맛, 매운맛, 칼로리 등]\
▼ [GUI (PyQt5)] → 결과 확인 및 저장\
▼ [SQLite3 DB] ← 식사 기록 저장

### 추천 시스템 플로우

[사용자 추천 요청]\
▼[식사 패턴 분석] → 최근 식사 기록 분석\
▼ [균형 알고리즘] → 맛/영양 균형 계산\
▼ [메뉴 추천] → 구체적 음식명 생성\
▼ [네이버 지도 API] → 주변 맛집 검색\
▼ [지도 표시] → [PyQt5 GUI]

## 📂 디렉토리 구조
```
ROKEY/
├─ README.md                          # 프로젝트 개요/문서
├─ requirements.txt                   # 파이썬 의존성 목록
├─ .gitignore                         # Git 무시 규칙
├─ .env                               # 환경변수(OpenAI 키 등, 민감)
└─ food_recommender/
   ├─ __init__.py                     # 패키지 식별자
   ├─ main.py                         # 앱 엔트리: QApplication 생성/메인 윈도우 표시
   ├─ api/
   │  ├─ __init__.py                  # 패키지 식별자
   │  ├─ openai_tools.py              # OpenAI Tools 스키마/허용 태그(enum) 정의
   │  └─ openai_vision.py             # 이미지 분석→도구 호출 파싱→태그 반환
   ├─ gui/
   │  ├─ __init__.py                  # 패키지 식별자
   │  ├─ main_window.py               # 메인 UI: 이미지 선택/작은 미리보기/좌측 패널/수동 지도 검색
   │  ├─ map_widget.py                # QWebEngineView로 네이버 지도 v5 검색 URL 로딩
   │  ├─ preferences_panel.py         # “지역/최근음식/기분/반경” 설정 UI + 저장/시그널
   │  └─ recommendation_widget.py     # 추천 결과 위젯 스텁(현재 미사용)
   ├─ utils/
   │  ├─ __init__.py                  # 패키지 식별자
   │  ├─ preferences.py               # JSON 기반 환경설정 로드/저장 유틸
   │  ├─ image_processor.py           # 이미지 전처리 스텁(현재 미사용)
   │  └─ location_utils.py            # 위치 유틸 스텁(현재 미사용)
   ├─ database/
   │  ├─ __init__.py                  # (현재 미사용) DB 패키지 자리표시자
   │  └─ db_manager.py                # SQLite 관리자 스텁(현재 미사용)
   └─ data/
      ├─ food_images/                 # 음식 이미지 저장(보통 .gitignore 대상)
      ├─ restaurant_cache/            # 맛집 캐시(보통 .gitignore 대상)
      └─ exports/                     # 내보내기 결과(보통 .gitignore 대상)
```

## 📝 사용 시나리오

### 🌅 아침 (7:00 AM)
1. **촬영**: 토스트와 커피 사진 촬영
2. **AI 분석**: 
   - 카테고리: `[양식]`
   - 세부메뉴: `[토스트, 아메리카노]`
   - 특성: `[단맛, 카페인, 간단식]`
3. **저장**: 아침 식사로 DB에 기록

### 🌞 점심 (12:30 PM)
1. **촬영**: 짠 라면 사진 촬영  
2. **AI 분석**:
   - 카테고리: `[한식]` 
   - 세부메뉴: `[라면]`
   - 특성: `[짠맛, 나트륨 높음, 면류]`
3. **추천**: "저녁에는 싱거운 음식이나 과일을 추천드려요!"

### 🌙 저녁 (7:00 PM)
1. **추천 요청**: "저녁 뭐 먹을까?" 버튼 클릭
2. **AI 추천**:
   - 추천 카테고리: `[한식]`
   - 추천 메뉴: `[김치찌개, 된장찌개, 비빔밥]`
   - 이유: "아침 양식, 점심 짠맛 → 저녁은 한식 담백한 음식"
3. **맛집 검색**: 
   - "김치찌개" 검색 → 주변 2km 내 한식당 10곳 지도 표시
   - 평점, 거리, 영업시간 정보 제공

## 🔧 OpenAI Tools 구조

### 음식 분석 Function
```python
{
  "name": "analyze_food",
  "description": "음식 이미지를 분석하여 구조화된 정보 추출",
  "parameters": {
    "category": ["한식", "중식", "일식", "양식", "분식", "디저트"],
    "dishes": ["김치찌개", "비빔밥", "파스타", "초밥", "..."],
    "taste": ["짠맛", "단맛", "매운맛", "신맛", "담백함"],
    "nutrition": ["고칼로리", "저칼로리", "고단백", "저지방"]
  }
}
```

### 메뉴 추천 Function

```
{
  "name": "recommend_menu",
  "description": "식사 패턴 기반 균형잡힌 메뉴 추천",
  "parameters": {
    "recommended_category": ["한식", "중식", "일식", "양식"],
    "recommended_dishes": ["구체적인 음식명 리스트"],
    "reason": "추천 이유"
  }
}
```

## 🚀 주요 기능
### 🎯 스마트 태그 시스템
- 대분류: 한식, 중식, 일식, 양식, 분식, 디저트
- 세부메뉴: 김치찌개, 비빔밥, 짜장면, 파스타, 초밥, 햄버거 등
- 맛 분류: 짠맛, 단맛, 매운맛, 신맛, 담백함
- 영양 정보: 칼로리, 나트륨, 당분, 단백질 수준
### 🗺️ 주변 맛집 찾기
- 실시간 검색: 추천받은 음식의 주변 음식점 자동 검색
- 상세 정보: 평점, 리뷰, 거리, 영업시간, 전화번호
- 지도 연동: 네이버 지도 API를 통한 위치 표시 및 길찾기
- 필터링: 거리순, 평점순, 가격대별 정렬
### 🧠 추천 알고리즘
- 맛 균형: 짠 음식 후 → 담백하거나 단 음식 추천
- 카테고리 다양성: 한식 → 양식 → 중식 순환 추천
- 시간대 고려: 저녁에는 가벼운 음식 우선 추천
- 개인 선호도: 자주 먹는 음식 패턴 학습

## 🎨 확장 아이디어
### 📱 모바일 연동
- 스마트폰 앱과 연동하여 외식할 때도 즉시 기록

### 🏥 건강 관리
- 혈당, 혈압 등 건강 지표와 연계한 맞춤 식단 관리

### 👨‍👩‍👧‍👦 가족 모드
- 가족 구성원별 식사 기록 및 단체 메뉴 추천

### 🛒 배달 앱 연동
- 추천 메뉴를 바로 배달 주문할 수 있는 기능

### 📊 맛집 리뷰 연동
- 방문한 맛집에 대한 개인 평가 및 재방문 추천



